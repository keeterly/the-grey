/* The Grey â€” acceptance.safe.css (r6)
   - Ensures YOU row + hand are always visible within 1280Ã—720 canvas
   - Centers slot rows with and without a `.slots` wrapper
   - Keeps AF cards = board card size, press&hold magnify, overlay safety
*/

/* ---------- base / canvas ---------- */

html, body { margin:0; padding:0; background:#f7f5f0; }
html, body {
  -webkit-text-size-adjust:100%;
  -webkit-user-select:none; user-select:none;
  -webkit-touch-callout:none;
  touch-action:manipulation;
  height:100%; width:100%;
  overflow:hidden;
}

:root{
  --tg-base-w: 1280;
  --tg-base-h: 720;
  --tg-scale: 1;

  /* rhythm */
  --row-gap: clamp(32px, 5.5vh, 56px);

  /* ðŸ”§ bigger hand reserve so the fan never falls outside the 720px canvas */
  --hand-reserve: clamp(160px, 22vh, 260px);

  --edge-pad: clamp(6px, 1.2vh, 12px);

  /* sizes */
  --card-w: 140px; --card-h: 200px;
  --slot-w: 150px; --slot-h: 210px;
}

@media (max-width: 900px){
  :root{
    --row-gap: clamp(44px, 9vh, 72px);
    --hand-reserve: clamp(140px, 20vh, 240px);
    --card-w: 126px; --card-h: 186px;
    --slot-w: 132px; --slot-h: 190px;
  }
}

#app{
  position:fixed; left:50%; top:50%;
  width:calc(var(--tg-base-w)*1px);
  height:calc(var(--tg-base-h)*1px);
  transform: translate(-50%, -50%) scale(var(--tg-scale));
  transform-origin: 50% 50%;
  will-change: transform;
  contain: layout paint;
  overflow: visible;
  padding-top: var(--edge-pad);
  padding-bottom: var(--edge-pad);
  pointer-events:auto;
}

/* ---------- rows / centering ---------- */

.board{ position:relative; width:100%; height:auto; margin-block: var(--row-gap); }
.board .row{ display:flex; flex-direction:column; gap:8px; width:100%; }

/* header row (kept inline) */
.board .row.head{
  flex-direction:row;
  justify-content:space-between;
  gap:6px;
}

/* âœ… center ANY non-header row; make it full-width */
.board .row:not(.head){
  flex-direction:row;
  justify-content:center;
  align-items:center;
  flex-wrap:wrap;
  gap: clamp(10px, 1.6vmin, 18px);
  width:100%;
}

/* If a `.slots` wrapper exists, center that too (covers both DOM shapes) */
.board .row > .slots{
  display:flex;
  justify-content:center;
  align-items:center;
  flex-wrap:wrap;
  gap: clamp(10px, 1.6vmin, 18px);
  width:100%;
}

/* ðŸ”§ keep YOU content inside frame and leave ample room for the hand */
.board[data-board="YOU"]{
  margin-top: var(--row-gap);
  padding-bottom: calc(16px + var(--hand-reserve));
}

/* Give the YOU slot row a minimum height so it doesn't collapse under the hand */
.board[data-board="YOU"] .row:not(.head){
  min-height: calc(var(--slot-h) + 10px);
}

/* Hide labels for now (as requested earlier) */
.af-title,
.board .name,
.board .hearts,
.board .traits,
.board .badges { display:none !important; }

/* ---------- slots & AF cards ---------- */

.slot, .glyph-slot{
  box-sizing:border-box;
  width: var(--slot-w); height: var(--slot-h);
  border-radius:16px; border:2px dashed rgba(0,0,0,.14);
  background:rgba(255,255,255,.55);
  display:flex; align-items:center; justify-content:center;
  color:#8b7f70;
  font: 14px/1.1 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}

.aetherflow{ margin-block: var(--row-gap); }

.af-cards{
  display:flex; justify-content:center; flex-wrap:wrap;
  gap: clamp(10px, 1.6vmin, 18px);
}

/* AF cards = board cards */
.af-card{
  width: var(--card-w); height: var(--card-h);
  box-sizing:border-box; border-radius:16px; background:#fff;
  box-shadow:0 1px 6px rgba(0,0,0,.06);
  padding:10px 10px 14px;
  transition: transform .12s ease, box-shadow .12s ease;
  will-change: transform;
}

/* ---------- hand layer & interactions ---------- */

/* hand sits above everything, a bit of top spacing so fan clears slots */
.board[data-board="YOU"] .hand{
  position:relative;
  z-index: 30000;               /* â¬† from r5 */
  display:flex; justify-content:center; gap:0;
  pointer-events:auto; padding-top:12px;  /* â¬† a touch more */
}

.hand .card{
  touch-action:none; cursor:grab;
  transition: transform 200ms cubic-bezier(.2,.8,.2,1), box-shadow 200ms ease;
  will-change: transform;
}
.card.is-dragging{
  position:fixed !important;
  z-index: 35000 !important;
  pointer-events:none !important;
}

/* press & hold preview */
.card.magnify{
  transform: scale(2) !important;
  z-index: 36000 !important;
  box-shadow: 0 18px 48px rgba(0,0,0,.32) !important;
  pointer-events: none !important;
}
.hand .card.magnify-hand{ transform: translateY(-72px) scale(2) !important; }

/* ---------- HUD ---------- */

.hud-min{
  position:fixed; left:50%; transform:translateX(-50%);
  bottom: calc(12px + env(safe-area-inset-bottom));
  width: calc(var(--tg-base-w)*1px*var(--tg-scale));
  max-width: 100vw;
  display:flex; align-items:center; justify-content:space-between;
  gap:10px; padding:0 10px; pointer-events:none; z-index: 15000;
}
.hud-min .left, .hud-min .right{ display:flex; align-items:center; gap:10px; pointer-events:auto; }

#aetherWell, .hud-min .bolt, [data-hud="energy"]{ display:none!important; }

#deckIcon, [data-role="deck-btn"]{
  display:inline-flex; align-items:center; justify-content:center;
  height:36px; min-width:48px; padding:0 12px;
  border-radius:10px; background:#fff; box-shadow:0 2px 10px rgba(0,0,0,.12);
  font:700 12px/1 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  letter-spacing:.3px;
}

/* ---------- version tag ---------- */

#tgHudRoot{ position:fixed; inset:0; z-index:99998; pointer-events:none; }
#tgVersionTag{
  position:absolute; right:12px; top:8px; z-index:99999;
  font:11px/1 monospace; opacity:.55; background:rgba(255,255,255,.85);
  padding:3px 6px; border-radius:6px; box-shadow:0 1px 6px rgba(0,0,0,.06);
}

/* ---------- overlay safety ---------- */

#overlay, .overlay{
  position:fixed; inset:0; display:none; pointer-events:none; z-index:1000;
  background: rgba(0,0,0,0);
}
#overlay.is-open, .overlay.is-open{
  display:block; pointer-events:auto; background: rgba(0,0,0,.35);
}
