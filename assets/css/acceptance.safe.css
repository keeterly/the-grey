/* acceptance.safe.css — v2.3.5-mobile-unified-fit+layout-only-r4
   - Works on Desktop + Mobile Landscape
   - Uses clamped, viewport-aware spacing so rows never feel cramped or too far apart
   - Extra hand reserve to keep fan from touching the player slots
   - Board chrome hidden; HUD centered to scaled width
*/

html, body { margin:0; padding:0; background:#f7f5f0; }
html, body {
  -webkit-text-size-adjust:100%;
  -webkit-user-select:none; user-select:none;
  -webkit-touch-callout:none;
  touch-action:manipulation;
  height:100%; width:100%;
  overflow:hidden;
}

/* Base canvas dimensions; JS writes --tg-scale */
:root{
  --tg-base-w: 1280;
  --tg-base-h: 720;
  --tg-scale: 1;

  /* Desktop / large screens baseline (clamped so it looks good on small laptops and 4K) */
  --row-gap: clamp(32px, 5.5vh, 56px);
  --hand-reserve: clamp(120px, 14vh, 180px);

  /* Optional breathing room at the very top/bottom inside the frame (scaled) */
  --edge-pad: clamp(6px, 1.2vh, 12px);
}

/* Mobile landscape overrides — activated by JS toggling .mobile-land */
html.mobile-land{
  --row-gap: clamp(44px, 9vh, 72px);
  --hand-reserve: clamp(120px, 16vh, 200px);
}

/* Center + scale the board */
#app{
  position:absolute; left:50%; top:50%;
  width:calc(var(--tg-base-w)*1px);
  height:calc(var(--tg-base-h)*1px);
  transform: translate(-50%, -50%) scale(var(--tg-scale));
  transform-origin: 50% 50%;
  will-change: transform;
  contain: layout paint;
  overflow: visible; /* keep hand/animations visible */
  /* small inner pad so top row doesn't kiss the frame edge on very short viewports */
  padding-top: var(--edge-pad);
  padding-bottom: var(--edge-pad);
}

/* Remove board chrome, keep slots */
#app .board,
#app .aetherflow{
  background:transparent!important;
  box-shadow:none!important;
  border:none!important;
  height:auto;
}

/* Spacing between rows */
#app .board[data-board="AI"]  { margin-bottom: var(--row-gap); }
#app .aetherflow             { margin: var(--row-gap) auto; }
#app .board[data-board="YOU"]{
  margin-top: var(--row-gap);
  padding-bottom: calc(6px + var(--hand-reserve));
}

/* Hide titles/names/hearts/trances/Aetherflow header */
#app .board .title,
#app .board .name,
#app .board .traits,
#app .board .badges,
#app .board .hearts,
#app .row.head,
#app .trances,
#app .aetherflow .af-title,
#app [data-label="Aetherflow"]{
  display:none!important;
}

/* Slot sizing; spacing handled by row gaps */
#app .tg-zone{
  display:flex; align-items:center; justify-content:center;
  gap:8px; padding:8px 8px; width:100%;
}
#app .tg-zone .tg-slot{
  flex:0 0 auto; min-height:96px;
  display:flex; align-items:center; justify-content:center;
}
#app .slot, #app .glyph-slot{
  width:96px; height:136px; border-radius:10px;
}

/* Hand in flow (no overlap with YOU thanks to --hand-reserve) */
#app .board[data-board="YOU"] .hand{ position:relative; width:auto; height:auto; }
#app .hand .card{
  touch-action:none;
  transition: transform 200ms cubic-bezier(.2,.8,.2,1), box-shadow 200ms ease;
  will-change: transform;
}

/* Press & Hold preview (paired with boot JS) */
.card.magnify{
  transform: scale(2) !important;
  z-index: 10000 !important;
  box-shadow: 0 18px 48px rgba(0,0,0,.32) !important;
  pointer-events: none !important;
}
#app .hand .card.magnify-hand{ transform: translateY(-72px) scale(2) !important; }

/* HUD lane centered to scaled canvas width */
.hud-min{
  position:fixed; left:50%; transform:translateX(-50%);
  bottom: calc(12px + env(safe-area-inset-bottom));
  width: calc(var(--tg-base-w)*1px*var(--tg-scale));
  max-width: 100vw;
  display:flex; align-items:center; justify-content:space-between;
  gap:10px; padding:0 10px; pointer-events:none;
}
.hud-min .left, .hud-min .right{
  display:flex; align-items:center; gap:10px; pointer-events:auto;
}

/* Hide legacy bolt HUD; your UI can still update counts behind the scenes */
#aetherWell, .hud-min .bolt, [data-hud="energy"]{ display:none!important; }

/* Deck button look (only styles an existing node; no DOM moves here) */
#deckIcon, [data-role="deck-btn"]{
  display:inline-flex; align-items:center; justify-content:center;
  height:36px; min-width:48px; padding:0 12px;
  border-radius:10px; background:#fff; box-shadow:0 2px 10px rgba(0,0,0,.12);
  font:700 12px/1 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  letter-spacing:.3px;
}

/* Version badge (when boot inserts it) */
#tgHudRoot{ position:fixed; inset:0; z-index:99998; pointer-events:none; }
#tgVersionTag{
  position:absolute; right:12px; top:8px; z-index:99999;
  font:11px/1 monospace; opacity:.55; background:rgba(255,255,255,.85);
  padding:3px 6px; border-radius:6px; box-shadow:0 1px 6px rgba(0,0,0,.06);
}
