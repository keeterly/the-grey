/* acceptance.safe.css — v2.3.5-mobile-unified-fit+anim6
   - 1280×720 board, centered; scale fits any mobile landscape
   - Boards chrome removed (slots kept), adaptive row spacing
   - Hand space reserved; no overlap with player slots
   - Press & Hold preview
   - Deck sits to the right (next to End Turn); Discard on the left
   - Bolt HUD hidden; optional Aether dots block
   - Robust fly clones (with boot-debug.js)
*/

html, body { margin:0; padding:0; }
html.mobile-land, html.mobile-land body{
  height:100%; width:100%;
  overflow:hidden;
  background:#f7f5f0;
  -webkit-text-size-adjust:100%;
  -webkit-user-select:none; user-select:none;
  -webkit-touch-callout:none;
  touch-action:manipulation;
}

/* Canvas sizing (actual scale is set by JS via --tg-scale) */
:root{
  --tg-base-w:1280;
  --tg-base-h:720;
  --tg-scale: 1;

  /* Adaptive spacing */
  --row-gap: max(3.5vh, 24px);      /* breathing room between rows */
  --hand-reserve: max(10vh, 96px);  /* keep hand from overlapping YOU row */

  /* Animations */
  --anim-fly-ms: 260ms;
}

/* Center + scale the game board */
#app{
  position:absolute; left:50%; top:50%;
  width:calc(var(--tg-base-w)*1px);
  height:calc(var(--tg-base-h)*1px);
  transform: translate(-50%,-50%) scale(var(--tg-scale));
  transform-origin:50% 50%;
  will-change: transform;
  contain: layout paint;
}

/* Keep slots, drop board chrome */
#app .board,
#app .aetherflow{
  background:transparent!important;
  box-shadow:none!important;
  border:none!important;
  height:auto;
}

#app .board[data-board="AI"]  { margin-bottom: var(--row-gap); }
#app .aetherflow             { margin: var(--row-gap) auto; }
#app .board[data-board="YOU"]{
  margin-top: var(--row-gap);
  padding-bottom: calc(6px + var(--hand-reserve));
}

/* Hide headers / chips that nudge centering */
#app .board .title,
#app .board .name,
#app .board .traits,
#app .board .badges,
#app .board .hearts,
#app .row.head,
#app .trances,
#app .aetherflow .af-title,
#app [data-label="Aetherflow"]{
  display:none!important;
}

/* Slots remain compact */
#app .tg-zone{
  display:flex; align-items:center; justify-content:center;
  gap:8px; padding:8px 8px; width:100%;
}
#app .tg-zone .tg-slot{
  flex:0 0 auto; min-height:96px;
  display:flex; align-items:center; justify-content:center;
}
#app .slot, #app .glyph-slot{ width:96px; height:136px; border-radius:10px; }

/* Hand: in-flow + horizontal drag allowed */
#app .board[data-board="YOU"] .hand{
  position:relative; width:auto; height:auto;
}
#app .hand .card{
  touch-action:none;
  transition: transform 200ms cubic-bezier(.2,.8,.2,1), box-shadow 200ms ease;
  will-change: transform;
}

/* Press & Hold preview for readability */
.card.magnify{
  transform: scale(2) !important;
  z-index: 10000 !important;
  box-shadow: 0 18px 48px rgba(0,0,0,.32) !important;
  pointer-events: none !important;
}
#app .hand .card.magnify-hand{ transform: translateY(-72px) scale(2) !important; }

/* HUD lane pinned to scaled board width */
.hud-min{
  position:fixed; left:50%; transform:translateX(-50%);
  bottom: calc(12px + env(safe-area-inset-bottom));
  width: calc(var(--tg-base-w)*1px*var(--tg-scale));
  max-width: 100vw;
  display:flex; align-items:center; justify-content:space-between;
  gap:10px; padding:0 10px; pointer-events:none;
}
.hud-min .left, .hud-min .right{
  display:flex; align-items:center; gap:10px; pointer-events:auto;
}

/* Hide old bolt/energy HUD */
#aetherWell,
.hud-min .bolt,
[data-hud="energy"],
.hud-min .toggle,
.hud-min .switch{ display:none!important; }

/* Deck button look (we adopt existing #deckIcon or create one) */
#deckIcon, [data-role="deck-btn"]{
  display:inline-flex; align-items:center; justify-content:center;
  height:36px; min-width:44px; padding:0 10px;
  border-radius:10px; background:#fff; box-shadow:0 2px 10px rgba(0,0,0,.12);
  font:700 12px/1 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  letter-spacing:.3px;
}

/* Optional Aether dots HUD (inserted by JS) */
#tgAetherHUD{
  display:inline-flex; align-items:center; gap:6px;
  padding:6px 8px; background:rgba(255,255,255,.9);
  border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,.08);
}
#tgAetherHUD .dots{ display:inline-flex; gap:4px; }
.aether-dot{ width:10px; height:10px; border-radius:50%; box-shadow:0 1px 3px rgba(0,0,0,.15); }
.aether-dot.blue{ background:#2a7de1; }  /* regular */
.aether-dot.red { background:#e14c49; }  /* temporary */

/* Fly clones used for draw/discard animations */
.tg-fly{
  position:fixed; top:0; left:0;
  transform: translate3d(0,0,0) scale(1);
  will-change: transform, opacity;
  pointer-events:none; z-index:12000;
  transition: transform var(--anim-fly-ms) cubic-bezier(.2,.8,.2,1),
              opacity  var(--anim-fly-ms) ease;
  filter: drop-shadow(0 12px 28px rgba(0,0,0,.25));
}

/* Version badge */
#tgHudRoot{ position:fixed; inset:0; z-index:99998; pointer-events:none; }
#tgVersionTag{
  position:absolute; right:12px; top:8px; z-index:99999;
  font:11px/1 monospace; opacity:.55; background:rgba(255,255,255,.85);
  padding:3px 6px; border-radius:6px; box-shadow:0 1px 6px rgba(0,0,0,.06);
}
