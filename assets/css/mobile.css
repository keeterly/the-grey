/* ============= THE GREY — MOBILE LANDSCAPE SCALER ============= */

/* We compute a scale factor that fits the fixed 1280×720 stage
   within the current viewport (letterboxed background). */
(function () {
  const root = document.documentElement;
  const update = () => {
    const W = 1280;
    const H = 720;
    const vw = Math.max(window.innerWidth, 320);
    const vh = Math.max(window.innerHeight, 320);
    const s = Math.min(vw / W, vh / H);

    root.style.setProperty("--tg-scale", s);
    const app = document.getElementById("app");
    if (app) {
      app.style.transform = `translate(-50%, -50%) scale(${s})`;
    }
    // also expose build tag to CSS for the top-right chip
    document.body.setAttribute("data-build", window.__THE_GREY_BUILD || "");
  };

  window.addEventListener("resize", update);
  window.addEventListener("orientationchange", update);
  document.addEventListener("DOMContentLoaded", update);
  update();
})();
