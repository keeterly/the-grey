:root { --base-bg:#f8f5ef; --panel-bg:#ffffff; --panel-edge:#e6e0d4; --gold:#d4b14c; --text-dark:#3a2e1f; --text-soft:#6b5f50; --shadow: rgba(0,0,0,.08); }
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:linear-gradient(180deg,var(--base-bg) 0%,#f3eee6 100%);color:#3a2e1f;font-family:Inter,Quicksand,'Segoe UI',system-ui,sans-serif;overflow:hidden;}
.container{max-width:1120px;margin:0 auto;padding:8px 12px 72px;}
.board{background:#ffffffc2;border-radius:18px;padding:12px;margin:10px auto;max-width:1120px;box-shadow:0 8px 24px var(--shadow);}
.row{display:flex;align-items:center;gap:10px;flex-wrap:wrap;}
.row.head{justify-content:space-between;margin-bottom:6px;}
.weaver{display:flex;flex-direction:column;gap:4px;min-width:180px;}
.weaver .name{font-weight:700;font-size:14px;color:#3a2e1f;}
.trances{display:flex;gap:6px;flex-wrap:wrap;}
.trance-chip{font-size:12px;padding:2px 8px;border-radius:999px;border:1px dashed #d7ccb7;background:#faf6ef;cursor:pointer;transition:box-shadow .15s ease, transform .12s ease;}
.trance-chip.active{border-style:solid;border-color:#d4b14c;background:#fff7e3;box-shadow:0 0 0 2px rgba(212,177,76,.25) inset;}
.trance-chip:active{transform:scale(.98)}
.hearts{display:flex;gap:4px;align-items:center;}
.heart{width:18px;height:18px;background:#ef6262;clip-path:path('M12 21s-6.716-4.977-9.75-8.01C-1.784 6.748 2.32 1.5 7.2 4.2 8.58 2.9 10.2 2 12 2s3.42.9 4.8 2.2c4.88-2.7 8.984 2.548 4.95 8.79C18.716 16.023 12 21 12 21Z');border:1px solid rgba(0,0,0,.06);box-shadow:0 1px 2px rgba(0,0,0,.06) inset;}
.heart.off{background:#eee3d3;}
.hearts.pulse-minor{animation:pulseMinor 1.2s ease 2}
.hearts.pulse-major{animation:pulseMajor 1.1s ease 2}
@keyframes pulseMinor{0%{transform:scale(1)}30%{transform:scale(1.06)}60%{transform:scale(1)}100%{transform:scale(1.04)}}
@keyframes pulseMajor{0%{transform:scale(1)}25%{transform:scale(1.14)}50%{transform:scale(1)}75%{transform:scale(1.08)}100%{transform:scale(1)}}

.slots{display:flex;gap:10px;}
.slot,.glyph-slot{width:150px;height:210px;border-radius:14px;border:1px dashed #c8bfa9;background:#fdfcf9;color:#b4a58a;display:flex;align-items:center;justify-content:center;box-shadow:inset 0 0 8px rgba(0,0,0,.04);transition:box-shadow .15s ease,border-color .15s ease,background .15s ease;}
.glyph-slot{background:#efe7d8;}
.slot.highlight,.glyph-slot.highlight{border-color:var(--gold);box-shadow:0 0 0 2px rgba(212,177,76,.35) inset, 0 0 14px rgba(212,177,76,.25);}
.slot-ghost{font-size:12px;}
.card{width:140px;height:200px;border-radius:16px;background:#fff;border:1px solid #e6e0d4;box-shadow:0 6px 16px var(--shadow);position:relative;transition:transform .08s ease,box-shadow .12s ease;user-select:none;touch-action:none;}
.card .title{position:absolute;top:26px;left:8px;right:8px;text-align:center;font-size:13px;font-weight:500;color:#3a2e1f;}
.card.is-dragging{cursor:grabbing;z-index:25;pointer-events:none;}
.badge{position:absolute;top:6px;left:6px;font-size:11px;padding:2px 6px;border-radius:10px;border:1px solid rgba(0,0,0,.05);box-shadow:0 1px 3px var(--shadow);}
.badge.Instant{background:#f2efff;color:#5542ad;border-color:#cbc4ff;}
.badge.Spell{background:#ecfff6;color:#1b6c49;border-color:#bfead2;}
.badge.Glyph{background:#fff0ea;color:#a34f35;border-color:#ffd4c5;}
.gain-chip{position:absolute;bottom:8px;left:8px;font-size:11px;padding:2px 6px;border-radius:12px;background:#fff7e3;border:1px solid #e8d29e;color:#7a5b12;cursor:pointer;}
.advance-btn{position:absolute;bottom:8px;right:8px;font-size:11px;padding:2px 8px;border-radius:12px;background:#ecfff6;border:1px solid #bfead2;color:#145b3e;cursor:pointer;}
.advance-btn[disabled]{opacity:.45;cursor:not-allowed;}
.hand{position:relative;height:220px;margin-top:16px;}
.hand .card{position:absolute;left:50%;transform-origin:50% 90%;pointer-events:auto;}

.pips{position:absolute;bottom:34px;left:0;right:0;display:flex;justify-content:center;gap:6px;}
.pip{width:10px;height:10px;border-radius:50%;border:1px solid var(--gold);background:transparent;}
.pip.full{background:var(--gold);} 

/* Aetherflow row */
.aetherflow{background:#ffffffc2;border:1px dashed #eadfc5;border-radius:12px;padding:8px;margin:6px auto;max-width:1120px;display:flex;gap:10px;align-items:flex-start;box-shadow:0 8px 24px var(--shadow);}
.af-title{font-size:13px;color:#6b5f50;margin-right:8px;width:90px;}
.af-cards{display:flex;gap:10px;flex-wrap:wrap;}
.af-card{width:160px;height:210px;border-radius:16px;background:#fff;border:1px solid #e6e0d4;box-shadow:0 6px 16px var(--shadow);position:relative;transition:transform .12s ease, box-shadow .12s ease, border-color .12s ease;}
.af-card .title{position:absolute;top:26px;left:8px;right:8px;text-align:center;font-size:13px;font-weight:500;color:#3a2e1f;}
.af-card.dragging{cursor:grabbing;z-index:40;pointer-events:none;}
.cost-chip{position:absolute;bottom:8px;right:8px;font-size:11px;padding:2px 6px;border-radius:12px;background:#fff7e3;border:1px solid #e8d29e;color:#7a5b12;}
.af-card.afford{border-color:#d4b14c; box-shadow:0 0 0 2px rgba(212,177,76,.35) inset, 0 0 12px rgba(212,177,76,.28); animation:afPulse 2.4s ease-in-out infinite alternate;}
@keyframes afPulse{0%{transform:translateZ(0) scale(1)}100%{transform:translateZ(0) scale(1.02) box-shadow:0 0 0 2px rgba(212,177,76,.42) inset, 0 0 16px rgba(212,177,76,.36);}}

/* Minimal bottom HUD */
.hud-min{position:fixed;left:10px;right:10px;bottom:10px;display:flex;justify-content:space-between;align-items:center;pointer-events:none;gap:8px;}
.hud-min .left,.hud-min .right{display:flex;gap:8px;align-items:center;pointer-events:auto;}
.icon{width:28px;height:28px;border-radius:8px;background:transparent;border:1px solid #d7d0c2;display:flex;align-items:center;justify-content:center;font-size:14px;color:#6b5f50;position:relative;}
.icon::after{content:attr(data-count);position:absolute;bottom:-8px;right:-8px;font-size:10px;background:#fff;border:1px solid #e6e0d4;border-radius:999px;padding:0 4px;color:#6b5f50;box-shadow:0 1px 2px rgba(0,0,0,.06);}
.icon.diamond{width:34px;height:34px;border-radius:6px;clip-path:polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);display:flex;align-items:center;justify-content:center;border-color:#e6cc96;}
.icon.btn{cursor:pointer;user-select:none}

/* Overlay spotlight */
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.35);display:none;align-items:center;justify-content:center;z-index:60;}
.overlay.show{display:flex;animation:fadeIn .18s ease;}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.spotCard{transform:scale(1);transition:transform .22s cubic-bezier(.2,.8,.2,1), opacity .22s ease;filter:drop-shadow(0 10px 28px rgba(0,0,0,.25));}

/* Modal for deck/discard + trance info */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;z-index:80;}
.modal.show{display:flex;animation:fadeIn .15s ease;}
.modal-card{background:#fff;border:1px solid #e6e0d4;border-radius:14px;min-width:300px;max-width:720px;max-height:80vh;overflow:auto;box-shadow:0 12px 36px rgba(0,0,0,.25);}
.modal-head{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;border-bottom:1px solid #eee;}
.modal-title{font-weight:600;color:#3a2e1f;}
.modal-body{padding:12px 14px;}
.list{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px;}
.list .cell{border:1px solid #eee;border-radius:10px;background:#fafafa;padding:8px 10px;font-size:12px;color:#3a2e1f;}
.btn-close{border:1px solid #e6e0d4;background:#fff;border-radius:8px;padding:6px 10px;cursor:pointer;}

.arrival{animation:cardArrival .22s ease;}
@keyframes cardArrival{0%{transform:scale(.96);box-shadow:0 6px 16px rgba(0,0,0,.08);}60%{transform:scale(1.06);}100%{transform:scale(1);} }

@media (max-width: 900px){
  .container{padding:6px 8px 72px;}
  .board,.aetherflow{max-width:100%;}
  .slot,.glyph-slot{width:132px;height:190px;}
  .card{width:126px;height:186px;}
}
