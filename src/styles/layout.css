/* =========================================================
   THE GREY â€” LAYOUT (locked rows + centered trance + ribbon)
   ========================================================= */

:root{
  /* Keep in sync with components.css .card size */
  --card-w: 180px;
  --card-h: 252px;   /* ~MTG aspect */
  --gap:    14px;

  --wrap-max: 1200px;
  --zone-bg: #fcfbf8;
  --pane-bg: #f5f1e8;
  --chip-bg: #f4ead8;
  --chip-fg: #7a6042;
}

html, body { height: 100%; }
body {
  margin: 0;
  background: var(--pane-bg);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial;
  color: #222;
  display: flex;
  flex-direction: column;
  align-items: center;
  overflow-x: hidden;
}

/* ---------------- HUD ---------------- */

.hudRow{
  width: 100%;
  max-width: var(--wrap-max);
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: 12px;
  padding: 8px 16px 12px;
  margin: 4px auto 8px;
}
.hudRow > #pillYou{ justify-self: start; }
.hudRow > #pillAi { justify-self: end;  }
.tranceDock { justify-self: center; }

/* ---------------- Shell ---------------- */

.wrap{
  width: 100%;
  max-width: var(--wrap-max);
  display: flex;
  flex-direction: column;
  gap: 18px;
  margin: 0 auto 24px;
  padding: 0 8px;
}
.zone{
  background: var(--zone-bg);
  border-radius: 12px;
  box-shadow: 0 2px 6px rgba(0,0,0,.05);
  padding: 10px 12px 14px;
}
.zone .title{ font-weight: 600; margin: 6px 0 8px; }

/* ---------------- Slots / Rows ---------------- */

.slots,
.glyphTray{
  display:flex;
  align-items:flex-start;
  justify-content:center;
  gap: var(--gap);
  flex-wrap: nowrap;
  overflow: visible;
}
.fixedRow{
  min-height: calc(var(--card-h) + 8px);
  max-height: calc(var(--card-h) + 8px);
}

.slotCell{
  width: var(--card-w);
  height: var(--card-h);
  background:#f9f6f1;
  border: 1px dashed rgba(0,0,0,.08);
  border-radius: 12px;
  display:flex; align-items:center; justify-content:center;
  transition: background .2s ease, transform .12s ease, outline-color .12s ease;
}
.slotCell .emptyCell{ color:#b9b0a4; }
.slotCell.ai{ background:#f2efe8; }

/* Drag affordances */
.slotCell.drop-ok    { outline: 2px solid rgba(90,160,110,.35); background:#f6fbf7; }
.slotCell.drop-no    { filter: grayscale(.3) brightness(.96); opacity:.7; }
.slotCell.drop-hover { outline: 3px solid rgba(90,160,110,.55); transform: translateY(-2px); }

/* ---------------- Aetherflow (GRID = perfect alignment) ---------------- */

.flowWrap{ display:flex; justify-content:center; }
.flowGrid{
  display: grid;
  grid-template-columns: repeat(5, var(--card-w));
  grid-template-rows: 26px var(--card-h);
  gap: var(--gap);
  align-items: start;
  justify-content: center;
}
.costCell{ grid-row:1; height:26px; position:relative; }
.marketCard{ grid-row:2; width: var(--card-w); height: var(--card-h); }

.costChip{
  position:absolute;
  top:-12px; left:50%; transform:translateX(-50%);
  background: var(--chip-bg);
  color: var(--chip-fg);
  border-radius:999px; width:26px; height:26px;
  display:grid; place-items:center;
  font-size:12px; font-weight:700;
  box-shadow: 0 1px 2px rgba(0,0,0,.06);
}

/* ---------------- Glyph tray ---------------- */

.glyphTray{ justify-content:flex-start; }
.glyphTray .card.glyphCard{
  width: calc(var(--card-w)*.85);
  height: calc(var(--card-h)*.85);
}

/* ---------------- Ribbon (Hand) ---------------- */

.ribbon-wrap{
  position: fixed; left:0; right:0; bottom:0;
  height: calc(var(--card-h) + 84px);
  display:flex; align-items:flex-end; justify-content:center;
  pointer-events:none;
  z-index:30;
}
.ribbon{
  display:flex; flex-wrap:nowrap; gap: 18px;
  transform: translateY(-36px);
  pointer-events: all;
  justify-content:center; align-items:flex-end;
  padding: 10px 18px;
  perspective: 800px;
}
.handCard{
  position: relative;
  will-change: transform;
  transform-origin: 50% 90%;
}


/* ---------------- Deck / Discard / FAB ---------------- */

.deckBar{
  position:fixed; bottom:14px; left:14px; display:flex; gap:8px; z-index:35;
}
.fabDial.topRight{
  position:fixed; top:14px; right:14px;
  display:flex; flex-direction:column; gap:8px; z-index:35;
}

/* Aether gem */
.aeGem{
  position:fixed; right:18px; bottom:78px; z-index:34;
  width:38px; height:38px; border-radius:10px;
  background:#f2c46d; color:#432c09;
  display:grid; place-items:center; font-weight:800;
  box-shadow: 0 4px 8px rgba(0,0,0,.15);
}


/* Hand ribbon wrapper sits low so it doesn't obscure board */
.ribbon-wrap {
  position: fixed;
  left: 50%;
  bottom: -22px;               /* tuck a bit below the viewport */
  transform: translateX(-50%);
  width: 100%;
  max-width: 1200px;
  pointer-events: none;         /* only cards accept input */
  z-index: 50;
}

/* The ribbon itself just arranges cards */
.ribbon {
  display: flex;
  justify-content: center;
  gap: 0;
  height: 188px;                /* target height for card visuals */
}

/* overall vertical tightening */
.wrap {
  display: grid;
  gap: 10px;              /* was larger; reduce inter-zone gap */
}

/* each zone block */
.zone {
  margin: 6px 0 10px;     /* less top/bottom margin */
  padding-top: 4px;       /* tiny breathing room if needed */
}

/* section titles */
.zone .title {
  margin: 0 0 6px 0;      /* reduce space under titles */
  line-height: 1.1;
}

/* if rows themselves add extra space */
.fixedRow, .slots, .flowWrap {
  margin-top: 4px;        /* keep small, consistent spacing */
}



/* ---------------- Responsive ---------------- */

@media (max-width:1120px){ :root{ --wrap-max:1000px; --card-w:168px; --card-h:240px; } }
@media (max-width:980px) { :root{ --wrap-max:900px;  --card-w:160px; --card-h:228px; } }
@media (max-width:860px) { :root{ --wrap-max:820px;  --card-w:152px; --card-h:216px; } }
