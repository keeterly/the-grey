.wrap{padding:12px; max-width:1100px; margin:auto; padding-bottom:170px; overflow-x:hidden}
.zone{background:linear-gradient(180deg,#fff,var(--panel-2)); border:1px solid var(--line); border-radius:14px; padding:10px; margin:10px 0; box-shadow:var(--shadow-panel)}
.title{font-weight:700;color:#8A8174;margin-bottom:8px}

/* Slots (3-up, fixed 146px) */
.slots{display:grid; grid-template-columns:repeat(3, 1fr); gap:10px}
.slot{
  background:var(--slot); border:2px dashed #CEC7BA; border-radius:12px;
  padding:8px; position:relative; height:146px;
  display:flex; flex-direction:column; gap:6px; overflow:hidden;
}
.slot h5{font-size:12px;color:#6a6f76}
.slot .slotBody{flex:1; min-height:0; overflow:hidden}
.slot .actions{padding-top:4px}

/* Ribbon */
.ribbon-wrap{position:fixed;left:0;right:0;bottom:0;z-index:40;padding:10px 8px calc(12px + env(safe-area-inset-bottom));background:linear-gradient(0deg,#F2ECE1,#F8F3EA);border-top:1px solid var(--line)}
.ribbon{display:flex;gap:6px;height:118px;overflow-x:auto;overflow-y:hidden;scrollbar-width:none;touch-action:pan-x;overscroll-behavior-y:contain;align-items:flex-start}
.ribbon::-webkit-scrollbar{display:none}

/* Boards/Market Cards */
.marketCard{background:var(--card);border:1px solid var(--card-line);border-radius:14px;padding:8px;min-height:146px;position:relative;box-shadow:0 4px 14px rgba(60,52,44,.12);cursor:pointer}
.marketCard h4{font-size:14px;color:#8A8174;margin-bottom:4px}
.marketCard p{font-size:12px;color:#muted;margin:4px 0 6px}
.marketCard .actions{display:flex;gap:8px}
.marketCard .actions button{padding:6px 10px;border-radius:10px;border:1px solid var(--line);background:#fff;color:#1f1f1f;cursor:pointer}
.marketBadge{position:absolute;top:6px;right:8px;border:1px solid var(--line);background:#fff;color:#555048;padding:2px 6px;border-radius:8px;font-size:11px}
.cardArt{height:118px;border-radius:10px;overflow:hidden;border:1px solid var(--line);background:#fff;display:grid;place-items:center}
.cardArt img{width:100%;height:100%;object-fit:contain;object-position:center}

/* Grid above market */
.flowWrap{overflow-x:auto;max-width:100%;scrollbar-width:none;mask-image:linear-gradient(90deg,transparent 0,var(--fade) 24px,#fff calc(100% - 24px),transparent 100%)}
.flowWrap::-webkit-scrollbar{display:none}
.flowGrid{display:grid;grid-template-columns:repeat(5,1fr);gap:10px;min-width:820px}
.costCell{display:flex;justify-content:center}
.costChip{min-width:38px;text-align:center;font-weight:800;letter-spacing:.04em;padding:3px 8px;border:1px solid var(--line);border-radius:999px;background:#fff;color:#8A8174;font-size:12px}

/* Pips */
.pips{display:flex;gap:4px;margin-top:4px}
.pip{width:10px;height:10px;border-radius:999px;border:1px solid #BBB3A6;background:#EFE9DC}
.pip.on{background:#7A838C;border-color:#7A838C}

/* Deck / Discard + FAB */
.deckBar{position:fixed;left:12px;bottom:126px;z-index:50;display:flex;gap:10px}
.chipCirc{width:42px;height:42px;border-radius:999px;display:grid;place-items:center;background:#fff;border:1px solid var(--line);box-shadow:var(--shadow-soft);position:relative}
.chipCirc svg{width:18px;height:18px;stroke:#6F6A60}
.chipCirc small{position:absolute;bottom:-10px;background:#fff;border:1px solid var(--line);border-radius:10px;padding:1px 6px;font-size:10px;color:#3a3d40}
.fabDial{position:fixed;right:12px;bottom:126px;z-index:50;display:flex;flex-direction:column;gap:12px}
.fab{width:46px;height:46px;border-radius:999px;background:#fff;border:1px solid var(--line);display:grid;place-items:center;color:#1d1f21;font-size:18px;box-shadow:var(--shadow-soft)}
#playerSlots .slot.is-hot{outline:2px solid var(--accent);outline-offset:2px}

/* HUD */
.hudRow{position:fixed; top:10px; left:12px; right:12px; z-index:70; display:flex; align-items:center; justify-content:space-between; gap:10px}
.pill{display:inline-flex; align-items:center; gap:0; background:#fff; border:1px solid var(--line); border-radius:999px; padding:4px; box-shadow:var(--shadow-soft)}
.seg{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; font-weight:800; color:#6b6258; font-size:13px}
.seg svg{width:16px;height:16px;stroke:#6f6a60}
.sep{width:1px;height:18px;background:linear-gradient(180deg,#e9e2d7,#d8d1c6)}
.tranceDock{display:flex; align-items:center; justify-content:center; min-width:210px}
.trance{background:#fff; border:1px solid var(--line); border-radius:999px; padding:6px 10px; box-shadow:var(--shadow-soft); color:#6b6258; font-weight:800; display:flex; flex-direction:column; gap:6px; min-width:210px}
.trTop{display:flex; align-items:center; gap:8px; justify-content:center; font-size:12px; color:#7a7165}
.trTop svg{width:16px;height:16px;stroke:#6f6a60}
.trRow{display:flex; align-items:center; gap:8px}
.trLabel{width:28px; text-align:right; font-size:11px; color:#8A8174; font-weight:800}
.trBar{flex:1; height:8px; border-radius:999px; background:#EEE8DC; overflow:hidden; border:1px solid #e2dbcf; position:relative}
.trFill{height:100%; width:0%; background:linear-gradient(90deg,#C7BCA8,#A09484)}
.trCount{width:44px; text-align:left; font-size:11px; color:#6b6258; font-weight:800}
.trReady{ box-shadow:0 0 0 2px rgba(138,129,116,.15) inset, 0 0 10px rgba(138,129,116,.25) inset }
.trBtn{cursor:pointer}
.trBtn[disabled]{opacity:.5; cursor:default}
.tranceMenu{position:fixed;z-index:80;left:50%;transform:translateX(-50%);top:calc(var(--hud-top,56px) + 56px);background:#fff;border:1px solid var(--line);border-radius:12px;box-shadow:0 10px 24px rgba(60,52,44,.2);padding:10px;display:none;min-width:240px}
.tranceMenu.show{display:block}
.tranceMenu h4{font-size:13px;margin-bottom:8px;color:#8A8174}
.tranceMenu .row{display:flex;gap:8px;flex-wrap:wrap}
.tranceMenu button{padding:7px 10px;border:1px solid var(--line);border-radius:10px;background:#fff;cursor:pointer}
.tranceMenu .sub{margin-top:8px;font-size:11px;color:#777}
