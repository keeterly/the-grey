import { initState, serializePublic, MAX_SLOTS } from "../engine/GameLogic.js";
const startBtn=document.getElementById("btn-start-turn"); const endBtn=document.getElementById("btn-end-turn");
const flowRowEl=document.getElementById("flow-row"); const slotsEl=document.getElementById("slots"); const handEl=document.getElementById("hand");
const turnIndicator=document.getElementById("turn-indicator"); const aetherReadout=document.getElementById("aether-readout");
let state=initState({});
function render(){const s=serializePublic(state);turnIndicator.textContent=`Turn ${s.turn} — ${s.activePlayer}`;aetherReadout.textContent=`${s.player.aether} / ${s.player.channeled}`;document.getElementById("p1").src=s.player.weaver.portrait||"";document.getElementById("p2").src=s.ai.weaver.portrait||"";document.getElementById("p1-name").textContent=s.player.weaver.name;document.getElementById("p2-name").textContent=s.ai.weaver.name;flowRowEl.replaceChildren();s.flow.forEach((c)=>{const li=document.createElement("li");li.className="flow-card";li.innerHTML=`<div>${c.name} <small>(${c.type})</small></div><div>Price: Æ ${c.price}</div>`;flowRowEl.appendChild(li);});slotsEl.replaceChildren();for(let i=0;i<MAX_SLOTS;i++){const d=document.createElement("div");d.className="slot";d.textContent="Empty Slot";slotsEl.appendChild(d);}handEl.replaceChildren();const N=s.player.hand.length;s.player.hand.forEach((c,i)=>{const el=document.createElement("article");el.className="card";const a=(i-(N-1)/2)*5,l=30+Math.abs(i-(N-1)/2)*4;el.style.transform=`translateY(${l}px) rotate(${a}deg)`;el.innerHTML=`<div style="padding:10px">${c.name}</div>`;handEl.appendChild(el);});}
startBtn.addEventListener("click",()=>render()); endBtn.addEventListener("click",()=>render()); render();